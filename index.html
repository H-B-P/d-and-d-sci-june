<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>D&D.Sci June 2021 Evaluator</title>
</head>
<body>
  <div id="choiceline"> Send <span id="pilot"><button onclick="set_pilot('Janelle')">Janelle</button>/<button onclick="set_pilot('Amir')">Amir</button>/<button onclick="set_pilot('Corazon')">Corazon</button>/<button onclick="set_pilot('Flint')">Flint</button>/<button onclick="set_pilot('Will')">Will</button></span>, and tell <span id="gender">them</span> to use <span id="resonance"><button onclick="set_resonance('Alpha')">Alpha</button>/<button onclick="set_resonance('Beta')">Beta</button>/<button onclick="set_resonance('Gamma')">Gamma</button>/<button onclick="set_resonance('Delta')">Delta</button>/<button onclick="set_resonance('Epsilon')">Epsilon</button>/<button onclick="set_resonance('Zeta')">Zeta</button>/<button onclick="set_resonance('Eta')">Eta</button></span> Resonance.</div>
  <br>
  <br>
  <div id="buttonLine"><button onclick="confirm()">Confirm Deployment</button></div>
  <br>
  <div id="resultLine"></div>
  <br>
  <div id="epilogueLine"></div>
  <br>
  <div id="probLine"></div>
  <br>
<b style="font-size:28px">
</div>
  
</b>
<script id="jsbin-javascript">

pilot=""
resonance=""

function set_pilot(pil){
 pilot=pil
 document.getElementById("pilot").innerHTML = pilot
 if ((pil=="Amir")||(pil=="Will")){
  document.getElementById("gender").innerHTML = "him"
 }
 if ((pil=="Janelle")||(pil=="Corazon")){
  document.getElementById("gender").innerHTML = "her"
 }
}

function set_resonance(res){
 resonance=res
 document.getElementById("resonance").innerHTML = res
}



function percentages(pil, res){
 if (pil=="Janelle"){
  if (res=="Beta"){
   return ["98.15%", "1.85%", "0%"]
  }
  if (res=="Gamma"){
   return ["33.29%", "36.62%", "30.09%"]
  }
  if (res=="Epsilon"){
   return ["22%", "78%", "0%"]
  }
 }
 if (pil=="Amir"){
  if (res=="Gamma"){
   return ["97.43%", "2.56%", "0.01%"]
  }
 }
 if (pil=="Corazon"){
  if (res=="Gamma"){
   return ["90.04%", "9.41%", "0.55%"]
  }
  if (res=="Zeta"){
   return ["22%", "0%", "78%"]
  }
 }
 if (pil=="Flint"){
  if (res=="Gamma"){
   return ["97.43%", "2.57%", "0%"]
  }
 }
 if (pil=="Will"){
  if (res=="Epsilon"){
   return ["0%", "100%", "0%"]
  }
 }
 return ["100%", "0%", "0%"]
}

function ending(pil, res){
 roll=Math.random()
 if (pil=="Janelle"){
  if (res=="Beta"){
   if (roll<0.9815){
    return "Die"
   }
   return "Canon"
  }
  if (res=="Gamma"){
   if (roll<0.3329){
    return "Die"
   }
   if (roll<(0.3329+0.3662)){
    return "Canon"
   }
   return "Win"
  }
  if (res=="Epsilon"){
   if (roll<0.22){
    return "Die"
   }
   return "Canon"
  }
 }
 if (pil=="Amir"){
  if (res=="Gamma"){
   if (roll<0.9743){
    return "Die"
   }
   if (roll<(0.9743+0.0256)){
    return "Canon"
   }
   return "Win"
  }
 }
 if (pil=="Corazon"){
  if (res=="Gamma"){
   if (roll<0.9004){
    return "Die"
   }
   if (roll<(0.9004+0.0941)){
    return "Canon"
   }
   return "Win"
  }
  if (res=="Zeta"){
   if (roll<0.22){
    return "Die"
   }
   return "Win"
  }
 }
 if (pil=="Flint"){
  if (res=="Gamma"){
   if (roll<0.9743){
    return "Die"
   }
   return "Canon"
  }
 }
 if (pil=="Will"){
  if (res=="Epsilon"){
   return "Canon"
  }
 }
 return "Die"
}


function confirm(){
 
 if (pilot!="" && resonance!=""){
  document.getElementById("buttonLine").innerHTML = ""
  
  percs = percentages(pilot,resonance)
  end = ending(pilot,resonance)
  
  if (end=="Die"){
   document.getElementById("resultLine").innerHTML = "Earwax ends first "+pilot+", then the Sphere, then your entire reality."
   document.getElementById("epilogueLine").innerHTML = "<em>A twig from the stray branch rejoins the trunk ahead of schedule; the flat children die with their world.</em>"
   document.getElementById("probLine").innerHTML = "(You had a "+percs[0]+" chance of getting this ending, a "+percs[1]+" chance of beating Earwax without learning its secrets, and a "+percs[2]+" chance of replacing Soul Coherence Theory.)"
  }
  if (end=="Canon"){
   document.getElementById("resultLine").innerHTML = "Earwax is neutralized, but its secrets die with it. Your surviving colleagues celebrate, analyze, and recover from this narrow victory, then return to business as usual."
   document.getElementById("epilogueLine").innerHTML = "<em>Five months later, it is dark in the submarine, and <a href='https://archiveofourown.org/works/2372021?view_full_work=true'>Maria is ready . . .</a></em>"
   document.getElementById("probLine").innerHTML = "(You had a "+percs[1]+" chance of getting this ending, a "+percs[0]+" chance of dying, and a "+percs[2]+" chance of replacing Soul Coherence Theory.)"
  }
  if (end=="Win"){
   document.getElementById("resultLine").innerHTML = "Earwax is eviscerated; and from its guts, you wring a viable alternative to Soul Coherence Theory."
   document.getElementById("epilogueLine").innerHTML = "<em>Dominos fall; best-laid plans are disrupted; the Stepping Stone never touches the ocean floor; a twig from the stray branch shoots off into the unknown.</em>"
   document.getElementById("probLine").innerHTML = "(You had a "+percs[2]+" chance of getting this ending, a "+percs[1]+" chance of beating Earwax without learning its secrets, and a "+percs[0]+" chance of dying.)"
  }
 }
}

</script>
</body>
</html>
